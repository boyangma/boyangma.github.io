---
layout: compress
---

{% include base_path %}

<!doctype html>
<html lang="{{ site.locale | slice: 0,2 }}" class="no-js"{% if site.site_theme == "dark" %} data-theme="dark"{% endif %}>
  <head>
    {% include head.html %}
    {% include head/custom.html %}
  </head>

  <body>

    {% include browser-upgrade.html %}
    {% include masthead.html %}

    {{ content }}

    <div class="page__footer">
      <footer>
        {% include footer/custom.html %}
        {% include footer.html %}
      </footer>
    </div>

    {% include scripts.html %}
    
    <script>
      function setAllLinksToBlank() {
        var links = document.querySelectorAll('a[href]');
        links.forEach(function (link) {
          if (link.target !== '_blank') {
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
          }
        });
      }

      // 确保在所有其他脚本执行完后再执行
      setTimeout(function() {
        setAllLinksToBlank();
        
        // 多重保险执行
        document.addEventListener('DOMContentLoaded', setAllLinksToBlank);
        window.addEventListener('load', setAllLinksToBlank);
        
        // 延迟执行
        setTimeout(setAllLinksToBlank, 500);
        setTimeout(setAllLinksToBlank, 1000);
        setTimeout(setAllLinksToBlank, 2000);
        
        // 监听页面变化
        var observer = new MutationObserver(function (mutations) {
          var shouldUpdate = false;
          mutations.forEach(function (mutation) {
            if (mutation.addedNodes.length > 0) {
              shouldUpdate = true;
            }
          });
          if (shouldUpdate) {
            setTimeout(setAllLinksToBlank, 100);
          }
        });
        
        if (document.body) {
          observer.observe(document.body, {
            childList: true,
            subtree: true
          });
        }
        
        // 每5秒强制检查一次
        setInterval(setAllLinksToBlank, 5000);
      }, 100);
    </script>
    
  </body>
    
</html>